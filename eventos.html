<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8">
        <title>Formato de eventos</title>
        <meta name="author" content="Zeniel Danaku & Einacio Spiegel">
        <meta name="keywords" content="Game,Python,Pygame,Mano's Gifts,Ázoe Engine,RPG,Role playing videogame">
        <link rel="stylesheet" href="screen.css">
        <link rel="icon" href="favicon.png">
    </head>
    <body>
        <nav><iframe class="nav" src="navigation.html">Esta página utliza marcos.</iframe></nav>
        <article>
            <h1>Formato de eventos</h1>
            <section>
                <p>El Ázoe Engine soporta un sistema interno de eventos que comunican distintas partes
                    de motor de forma asincrónica y en cascada. Los eventos se disparan importanto la
                    clase EventDispatcher del siguinete modo</p>

                <pre>
                    <code>
from engine.globs.eventDispatcher import EventDispatcher
                    </code>
                </pre>

                <p>Luego, cuando el evento sea ejecutado, se realiza un trigger()</p>

                <pre>
                    <code>
EventDispatcher.trigger("&lt;nombre del evento&gt;", "&lt;clase de origen&gt;", {&lt;datos del evento&gt;})
                    </code>
                </pre>
                <p>Para que otros módulos y clases respondan al evento, es neceario que primero
                    se registren, mediante el método register().</p>
                <pre>
                    <code>
EventDispatcher.register(&lt;método o función&gt;, "&lt;evento1&gt;" , "&lt;evento2&gt;", ...)
                    </code>
                </pre>

                <p>Cuando ya no sea necenario responder a un evento, la clase puede llamar al método
                    deregister(). Los parámetros de este método son los mismos que se usan en register().</p>
                <pre>
                    <code>
EventDispatcher.deregister(&lt;método o función&gt;, "&lt;evento1&gt;", "&lt;evento2&gt;", ...)
                    </code>
                </pre>
                <p>Nótese que los métodos permiten (de)registrar cada oyente a un numero arbitrario
                    de eventos.</p>
            </section>

            <section>
                <p>Los eventos que actualmente están en el engine son:
                <dl>
                    <dt>NuevoJuego</dt>: <dd>se dispara cuando se inicia un juego.</dd>
                    <dt>CambiarMapa</dt>: <dd>cuando héroe cambia de mapas, este evento le avisa al engine que cambie el mapa.</dd>
                    <dt>hora</dt>: <dd>cada vez que el reloj llegue a una hora, se dispara este evento. Está vinculado al movimiento solar.</dd>
                    <dt>MovimientoSolar</dt>: <dd>cambia las sombras de los sprites.</dd>
                    <dt>DialogEvent</dt>: <dd>cuando un fragmento de diálogo lance un evento, será de este tipo.</dd>
                    <dt>MobHerido</dt>: <dd>se dispara cuando un mob resulta herido. Actualiza el HUD si el mob es el héroe.</dd>
                    <dt>MobMuerto</dt>: <dd>se dispara cuando un mob muere. Esto cierra el juego si el mob es el héroe.</dd>
                    <dt>DelItem</dt>: <dd>cuando el héroe agarra un item del mapa, éste evento se lanza para hacerlo desaparecer del mapa.</dd>
                    <dt>button_activated</dt>: <dd>este evento está vinculado a las EventFlags.</dd>
                    <dt>Pause</dt>: <dd>se activa cuando el juego entra en pausa. detiene el correr del tiempo.</dd>
                    <dt>key</dt>: <dd>cada vez que el jugador toca una tecla, se dispara este evento. Cada evento tendrá un efecto diferente dependiendo del modo de juego en el que se encuentre el motor, la tecla pulsada, y el modo en el que se haya pulsado (tap, hold o release).</dd>
                    <dt>OpenMenu</dt>: <dd>cuando Pausa u otro menú llaman a nuevos menúes se dispara este evento para abrirlos.</dd>
                    <dt>ToggleSetKey</dt>: <dd>cuando el usuario elija una tecla para modificar el input, se dispara este evento para capturar el keydown de una tecla no registrada.</dd>
                    <dt>Save, SaveData y SaveDataFile</dt>: <dd>estos tres eventos se disparan en cascada. El primero avisa a todas las clases oyentes que se va a guardar el estado del juego. Cada clase, a su vez, lanza SaveData con los datos que se quieren guardar (posicion del personaje, hora, etc). Finalmente, SaveFileData le indica al engine que tiene que guardar la data en el archivo de salvado.</dd>
                </dl>

            </section>
        </article>
    </body>
</html>